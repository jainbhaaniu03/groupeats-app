<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GroupEats - Find Restaurants Everyone Loves</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçΩÔ∏è</text></svg>">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide Icons as SVG components
        const Heart = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l6 6z"/>
            </svg>
        );

        const X = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m18 6-12 12"/><path d="m6 6 12 12"/>
            </svg>
        );

        const MapPin = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/>
            </svg>
        );

        const Users = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="m22 21-3-3m3 0a3 3 0 0 0-3-3"/>
            </svg>
        );

        const Settings = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="3"/><path d="m12 1 1.27 3.27c.2.48.74.72 1.23.55l2.94-1.04c.48-.17 1.01.1 1.18.58l.83 2.87c.17.48.6.78 1.1.78h3.09c.52 0 .95.43.95.95v.2c0 .52-.43.95-.95.95h-3.09c-.5 0-.93.3-1.1.78l-.83 2.87c-.17.48-.7.75-1.18.58l-2.94-1.04c-.49-.17-1.03.07-1.23.55L12 23l-1.27-3.27c-.2-.48-.74-.72-1.23-.55l-2.94 1.04c-.48.17-1.01-.1-1.18-.58l-.83-2.87c-.17-.48-.6-.78-1.1-.78H0.95C.43 15.99 0 15.56 0 15.04v-.2c0-.52.43-.95.95-.95h3.09c.5 0 .93-.3 1.1-.78l.83-2.87c.17-.48.7-.75 1.18-.58l2.94 1.04c.49.17 1.03-.07 1.23-.55L12 1z"/>
            </svg>
        );

        const Star = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/>
            </svg>
        );

        const Loader = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>
            </svg>
        );

        const DollarSign = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
        );

        const GroupEats = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [currentGroup, setCurrentGroup] = useState(null);
            const [restaurants, setRestaurants] = useState([]);
            const [currentRestaurantIndex, setCurrentRestaurantIndex] = useState(0);
            const [groupVotes, setGroupVotes] = useState({});
            const [matches, setMatches] = useState([]);
            const [searchRadius, setSearchRadius] = useState(5);
            const [showSettings, setShowSettings] = useState(false);
            const [showMatches, setShowMatches] = useState(false);
            const [location, setLocation] = useState(null);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            // Sample restaurant data
            const sampleRestaurants = [
                {
                    id: 1,
                    name: "Tony's Italian Bistro",
                    cuisine: "Italian",
                    rating: 4.5,
                    priceRange: "$$",
                    distance: 0.8,
                    image: "https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop",
                    description: "Authentic Italian cuisine with fresh pasta and wood-fired pizza",
                    address: "123 Main St, Downtown"
                },
                {
                    id: 2,
                    name: "Sakura Sushi Bar",
                    cuisine: "Japanese",
                    rating: 4.7,
                    priceRange: "$$$",
                    distance: 1.2,
                    image: "https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?w=400&h=300&fit=crop",
                    description: "Fresh sushi and traditional Japanese dishes",
                    address: "456 Oak Ave, Midtown"
                },
                {
                    id: 3,
                    name: "The Burger Joint",
                    cuisine: "American",
                    rating: 4.2,
                    priceRange: "$",
                    distance: 0.5,
                    image: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop",
                    description: "Gourmet burgers and craft beer in a casual setting",
                    address: "789 Pine St, Uptown"
                },
                {
                    id: 4,
                    name: "Spice Garden",
                    cuisine: "Indian",
                    rating: 4.6,
                    priceRange: "$$",
                    distance: 2.1,
                    image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=400&h=300&fit=crop",
                    description: "Authentic Indian flavors with vegetarian options",
                    address: "321 Elm Dr, Eastside"
                },
                {
                    id: 5,
                    name: "Le Petit Caf√©",
                    cuisine: "French",
                    rating: 4.4,
                    priceRange: "$$$",
                    distance: 1.8,
                    image: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop",
                    description: "Charming French bistro with classic dishes",
                    address: "654 Maple Ln, Westside"
                },
                {
                    id: 6,
                    name: "Dragon Palace",
                    cuisine: "Chinese",
                    rating: 4.3,
                    priceRange: "$$",
                    distance: 1.5,
                    image: "https://images.unsplash.com/photo-1526318896980-cf78c088247c?w=400&h=300&fit=crop",
                    description: "Traditional Chinese cuisine and dim sum",
                    address: "987 Cedar St, Chinatown"
                },
                {
                    id: 7,
                    name: "Taco Libre",
                    cuisine: "Mexican",
                    rating: 4.1,
                    priceRange: "$",
                    distance: 0.7,
                    image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop",
                    description: "Authentic Mexican street food and margaritas",
                    address: "159 Birch Ave, South District"
                },
                {
                    id: 8,
                    name: "Mediterranean Delight",
                    cuisine: "Mediterranean",
                    rating: 4.5,
                    priceRange: "$$",
                    distance: 1.9,
                    image: "https://images.unsplash.com/photo-1544510503-6e31d2e95e31?w=400&h=300&fit=crop",
                    description: "Fresh Mediterranean dishes with healthy options",
                    address: "753 Willow Way, North End"
                }
            ];

            // Sample groups and users
            const sampleGroups = [
                {
                    id: 1,
                    name: "Friday Night Crew",
                    members: [
                        { id: 1, name: "Alex", avatar: "A" },
                        { id: 2, name: "Jordan", avatar: "J" },
                        { id: 3, name: "Sam", avatar: "S" },
                        { id: 4, name: "Casey", avatar: "C" }
                    ]
                }
            ];

            // Get user's location
            useEffect(() => {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            setLocation({
                                lat: position.coords.latitude,
                                lng: position.coords.longitude
                            });
                        },
                        (error) => {
                            setLocation({ lat: 40.7128, lng: -74.0060 });
                        }
                    );
                } else {
                    setLocation({ lat: 40.7128, lng: -74.0060 });
                }
            }, []);

            // Load restaurants
            useEffect(() => {
                const loadRestaurants = () => {
                    if (location) {
                        setLoading(true);
                        setTimeout(() => {
                            const filteredRestaurants = sampleRestaurants.filter(r => r.distance <= searchRadius);
                            setRestaurants(filteredRestaurants);
                            setCurrentRestaurantIndex(0);
                            setLoading(false);
                        }, 1500);
                    }
                };
                loadRestaurants();
            }, [location, searchRadius]);

            // Initialize
            useEffect(() => {
                setCurrentUser({ id: 1, name: "Alex", avatar: "A" });
                setCurrentGroup(sampleGroups[0]);
            }, []);

            const handleSwipe = (restaurantId, vote) => {
                const newVotes = { ...groupVotes };
                if (!newVotes[restaurantId]) {
                    newVotes[restaurantId] = {};
                }
                newVotes[restaurantId][currentUser.id] = vote;
                setGroupVotes(newVotes);

                const restaurant = restaurants[currentRestaurantIndex];
                const votes = newVotes[restaurantId];
                const votedMembers = Object.keys(votes);
                
                if (votedMembers.length === currentGroup.members.length) {
                    const allLiked = Object.values(votes).every(vote => vote === 'like');
                    if (allLiked) {
                        setMatches(prev => [...prev, restaurant]);
                    }
                }

                if (currentRestaurantIndex < restaurants.length - 1) {
                    setCurrentRestaurantIndex(currentRestaurantIndex + 1);
                }
            };

            const getCurrentRestaurant = () => {
                return restaurants[currentRestaurantIndex];
            };

            const getVoteStatus = (restaurantId) => {
                if (!groupVotes[restaurantId]) return null;
                const votes = groupVotes[restaurantId];
                const votedCount = Object.keys(votes).length;
                const likeCount = Object.values(votes).filter(vote => vote === 'like').length;
                return { votedCount, likeCount, totalMembers: currentGroup.members.length };
            };

            if (loading || !currentUser || !currentGroup) {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-gray-50">
                        <Loader className="w-8 h-8 text-pink-500 animate-spin mb-4" />
                        <p className="text-gray-600">Finding amazing restaurants near you...</p>
                    </div>
                );
            }

            if (showMatches) {
                return (
                    <div className="max-w-md mx-auto bg-white min-h-screen">
                        <div className="p-4 bg-gradient-to-r from-pink-500 to-red-500 text-white">
                            <div className="flex items-center justify-between">
                                <button 
                                    onClick={() => setShowMatches(false)}
                                    className="text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors"
                                >
                                    ‚Üê Back
                                </button>
                                <h1 className="text-xl font-bold">Group Matches</h1>
                                <div></div>
                            </div>
                        </div>
                        
                        <div className="p-4">
                            {matches.length === 0 ? (
                                <div className="text-center py-8">
                                    <Heart className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                                    <p className="text-gray-500">No matches yet. Keep swiping!</p>
                                </div>
                            ) : (
                                <div className="space-y-4">
                                    {matches.map(restaurant => (
                                        <div key={restaurant.id} className="bg-white rounded-lg shadow-lg p-4 border">
                                            <div className="flex items-center space-x-3 mb-3">
                                                <Heart className="w-6 h-6 text-red-500" />
                                                <span className="text-green-600 font-semibold">Everyone Loves This!</span>
                                            </div>
                                            <img 
                                                src={restaurant.image} 
                                                alt={restaurant.name}
                                                className="w-full h-32 object-cover rounded-lg mb-3"
                                            />
                                            <h3 className="text-lg font-bold">{restaurant.name}</h3>
                                            <p className="text-gray-600 text-sm mb-2">{restaurant.description}</p>
                                            <div className="flex items-center justify-between text-sm text-gray-500 mb-2">
                                                <div className="flex items-center space-x-1">
                                                    <Star className="w-4 h-4 text-yellow-400" />
                                                    <span>{restaurant.rating}</span>
                                                </div>
                                                <div className="flex items-center space-x-1">
                                                    <MapPin className="w-4 h-4" />
                                                    <span>{restaurant.distance} mi</span>
                                                </div>
                                                <span>{restaurant.priceRange}</span>
                                            </div>
                                            <p className="text-xs text-gray-500">{restaurant.address}</p>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            if (showSettings) {
                return (
                    <div className="max-w-md mx-auto bg-white min-h-screen">
                        <div className="p-4 bg-gradient-to-r from-pink-500 to-red-500 text-white">
                            <div className="flex items-center justify-between">
                                <button 
                                    onClick={() => setShowSettings(false)}
                                    className="text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors"
                                >
                                    ‚Üê Back
                                </button>
                                <h1 className="text-xl font-bold">Settings</h1>
                                <div></div>
                            </div>
                        </div>
                        
                        <div className="p-4">
                            <div className="mb-6">
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Search Radius: {searchRadius} miles
                                </label>
                                <input
                                    type="range"
                                    min="1"
                                    max="25"
                                    value={searchRadius}
                                    onChange={(e) => setSearchRadius(parseInt(e.target.value))}
                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                />
                                <div className="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>1 mi</span>
                                    <span>25 mi</span>
                                </div>
                            </div>
                            
                            {location && (
                                <div className="bg-gray-100 rounded-lg p-4 mb-4">
                                    <h3 className="font-medium text-gray-700 mb-2">Your Location</h3>
                                    <p className="text-sm text-gray-600">
                                        üìç Searching near you<br/>
                                        Found {restaurants.length} restaurants within {searchRadius} miles
                                    </p>
                                </div>
                            )}

                            <div className="bg-blue-50 rounded-lg p-4">
                                <h3 className="font-medium text-blue-900 mb-2">About This Demo</h3>
                                <p className="text-sm text-blue-700">
                                    This is a demo version using sample restaurant data. 
                                    In a full version, this would connect to real restaurant APIs 
                                    like Yelp or Google Places to show actual nearby restaurants.
                                </p>
                            </div>
                        </div>
                    </div>
                );
            }

            const currentRestaurant = getCurrentRestaurant();

            return (
                <div className="max-w-md mx-auto bg-white min-h-screen">
                    {/* Header */}
                    <div className="p-4 bg-gradient-to-r from-pink-500 to-red-500 text-white">
                        <div className="flex items-center justify-between mb-4">
                            <h1 className="text-2xl font-bold">GroupEats</h1>
                            <div className="flex space-x-2">
                                <button 
                                    onClick={() => setShowMatches(true)}
                                    className="bg-white bg-opacity-20 p-2 rounded-full relative hover:bg-opacity-30 transition-colors"
                                >
                                    <Heart className="w-5 h-5" />
                                    {matches.length > 0 && (
                                        <span className="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                                            {matches.length}
                                        </span>
                                    )}
                                </button>
                                <button 
                                    onClick={() => setShowSettings(true)}
                                    className="bg-white bg-opacity-20 p-2 rounded-full hover:bg-opacity-30 transition-colors"
                                >
                                    <Settings className="w-5 h-5" />
                                </button>
                            </div>
                        </div>
                        
                        {/* Group Info */}
                        <div className="flex items-center space-x-3">
                            <Users className="w-5 h-5" />
                            <span className="font-medium">{currentGroup.name}</span>
                            <div className="flex -space-x-2">
                                {currentGroup.members.map(member => (
                                    <div 
                                        key={member.id}
                                        className="w-8 h-8 bg-white text-pink-500 rounded-full flex items-center justify-center text-sm font-bold border-2 border-white"
                                    >
                                        {member.avatar}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Restaurant Card */}
                    <div className="p-4">
                        {currentRestaurant ? (
                            <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
                                <img 
                                    src={currentRestaurant.image} 
                                    alt={currentRestaurant.name}
                                    className="w-full h-64 object-cover"
                                />
                                
                                <div className="p-6">
                                    <h2 className="text-2xl font-bold mb-2">{currentRestaurant.name}</h2>
                                    <p className="text-gray-600 mb-4">{currentRestaurant.description}</p>
                                    
                                    <div className="flex items-center justify-between mb-4">
                                        <div className="flex items-center space-x-1">
                                            <Star className="w-5 h-5 text-yellow-400" />
                                            <span className="font-medium">{currentRestaurant.rating}</span>
                                        </div>
                                        <div className="flex items-center space-x-1">
                                            <MapPin className="w-5 h-5 text-gray-400" />
                                            <span>{currentRestaurant.distance} mi away</span>
                                        </div>
                                        <div className="flex items-center space-x-1">
                                            <DollarSign className="w-5 h-5 text-gray-400" />
                                            <span>{currentRestaurant.priceRange}</span>
                                        </div>
                                    </div>

                                    <div className="bg-gray-100 rounded-lg p-3 mb-6">
                                        <div className="text-sm text-gray-600 mb-2">
                                            üçΩÔ∏è {currentRestaurant.cuisine} ‚Ä¢ üìç {currentRestaurant.address}
                                        </div>
                                        {(() => {
                                            const voteStatus = getVoteStatus(currentRestaurant.id);
                                            if (voteStatus) {
                                                return (
                                                    <div className="text-sm">
                                                        <span className="text-green-600">
                                                            {voteStatus.likeCount}/{voteStatus.totalMembers} members liked this
                                                        </span>
                                                    </div>
                                                );
                                            }
                                            return null;
                                        })()}
                                    </div>

                                    {/* Action Buttons */}
                                    <div className="flex space-x-4">
                                        <button
                                            onClick={() => handleSwipe(currentRestaurant.id, 'pass')}
                                            className="flex-1 bg-gray-200 hover:bg-gray-300 p-4 rounded-2xl flex items-center justify-center transition-colors"
                                        >
                                            <X className="w-8 h-8 text-gray-600" />
                                        </button>
                                        <button
                                            onClick={() => handleSwipe(currentRestaurant.id, 'like')}
                                            className="flex-1 bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 p-4 rounded-2xl flex items-center justify-center transition-colors"
                                        >
                                            <Heart className="w-8 h-8 text-white" />
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="text-center py-12">
                                <div className="text-6xl mb-4">üéâ</div>
                                <h2 className="text-2xl font-bold mb-2">All done!</h2>
                                <p className="text-gray-600 mb-
